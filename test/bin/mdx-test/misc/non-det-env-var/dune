(rule
 (target test-case.md.corrected)
 (deps
  (package mdx))
 (enabled_if (<> %{os_type} Win32))
 (action
  (setenv
   MDX_RUN_NON_DETERMINISTIC
   true
   (run ocaml-mdx-test --force-output %{dep:test-case.md}))))

(rule
 (alias runtest)
 (enabled_if (<> %{os_type} Win32))
 (action
  (diff test-case.md.expected test-case.md.corrected)))
